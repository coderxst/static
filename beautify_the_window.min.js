const backgroundList=[{title:"1. 二次元",subtitle:"查看二次元背景",content:[{title:"精选照片",url:"https://images.pexels.com/photos/2541310/pexels-photo-2541310.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1631677/pexels-photo-1631677.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/320617/pexels-photo-320617.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1044990/pexels-photo-1044990.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1382393/pexels-photo-1382393.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/370799/pexels-photo-370799.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/3802075/pexels-photo-3802075.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1629236/pexels-photo-1629236.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1287142/pexels-photo-1287142.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1382393/pexels-photo-1382393.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/370799/pexels-photo-370799.jpeg?auto=compress&cs=tinysrgb&w=800"}]},{title:"2. 风景",subtitle:"查看风景背景",content:[{title:"精选照片",url:"https://images.pexels.com/photos/255379/pexels-photo-255379.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/2156881/pexels-photo-2156881.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1382393/pexels-photo-1382393.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/370799/pexels-photo-370799.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/3802075/pexels-photo-3802075.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1629236/pexels-photo-1629236.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1287142/pexels-photo-1287142.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/2541310/pexels-photo-2541310.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1631677/pexels-photo-1631677.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/320617/pexels-photo-320617.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"精选照片",url:"https://images.pexels.com/photos/1044990/pexels-photo-1044990.jpeg?auto=compress&cs=tinysrgb&w=800"}]}],CoderxstTools={getBase64:t=>new Promise(((e,s)=>{window.URL=window.URL||window.webkitURL;const n=new XMLHttpRequest;n.open("get",t,!0),n.responseType="blob",n.onload=function(){if(200==this.status){const t=this.response,s=new FileReader;s.onloadend=function(t){const s=t.target.result;e(s)},s.readAsDataURL(t)}else s()},n.send()})),throttle(t,e=250){let s=null;return function(...n){null==s&&(t.apply(this,n),s=setTimeout((()=>{clearTimeout(s),s=null}),e))}},bool(t){if("true"===t)return!0;if("false"===t)return!1;throw new Error("参数错误, 只能是字符串类型的'true'或者'false'")},chunk(t,e=1){const s=[];for(let n=0;n<t.length;n+=e)s.push(t.slice(n,n+e));return s}},beautifyTheWindowConfig={windowTitle:"美化窗口",preferenceSectionTitle:"一、显示偏好",themeColorSectionTitle:"二、主题色设置",fontFamilySectionTitle:"三、字体设置",backgroundSectionTitle:"四、背景设置",backgroundEl:document.getElementById("web_bg"),cardOpacity:70,backgroundFilterConfig:{enable:!0,inputConfig:{blurRadius:17,saturation:100,contrastRatios:100}},effectControlList:[{id:"starrySky",name:"星空特效(夜间模式)",enable:!1,eventFn(t){console.log(t.target)}},{id:"neonLamp",name:"霓虹彩灯(夜间模式)",enable:!1,eventFn(t){console.log(t.target)}},{id:"fps",name:"帧率检测(默认开启)",enable:!0,eventFn(t){console.log(t.target)}},{id:"snow",name:"雪花特效(白天模式)",enable:!1,eventFn(t){console.log(t.target)}},{id:"rightWidget",name:"右侧部件(默认开启)",enable:!0,eventFn(t){console.log(t.target)}},{id:"topPermanent",name:"顶栏常驻(默认开启)",enable:!0,eventFn(t){console.log(t.target)}},{id:"asideDisplay",name:"侧栏显隐(默认开启)",enable:!0,eventFn(t){console.log(t.target)}},{id:"asidePosition",name:"侧栏位置(默认右边)",enable:!0,eventFn(t){console.log(t.target)}}],effectControlListColumn:2,themeColor:{activeIndex:-1,colorList:["#f05a5a","#e59642","#c2ce5a","#39ccc1","#5acd82","#66ccff","#425aef","#61649f","#cd5ac3","#935acd","#ee709c","#9d9d9d"]},fontFamily:{activeIndex:-1,fontFamilyList:["宋体","微软雅黑","黑体","仿宋","楷体","隶书","幼圆","华文行楷","华文宋体","华文仿宋","华文楷体"]},backgroundList:backgroundList};class BeautifyTheWindow{#t=null;#e=null;#s=!0;#n=!1;#o=!1;#i={width:"880px",height:"500px"};#a={width:"100vw",height:"100vh"};#c=[];constructor(t){this.#t=t,this.#e=document.createElement("div"),this.#e.id="beautify-the-window",this.#l()}#r(){const t=document.createElement("div");t.classList.add("window-title");const e=document.createElement("div");e.classList.add("btns");const s=[{classList:["btn","close-btn"],innerText:"x",title:"关闭窗口",eventHandleFn:this.handleCloseClick},{classList:["btn","scale-btn"],innerText:"口",title:"最大(恢复)化窗口",eventHandleFn:this.handleScaleClick},{classList:["btn","min-btn"],innerText:"一",title:"最小化窗口",eventHandleFn:this.handleMinClick}],n=t=>{"string"==typeof t.classList&&(t.classList=[t.classList]);const e=document.createElement("span");return e.classList.add(...t.classList),e.innerText=t.innerText,e.title=t.title,e.addEventListener("click",(e=>{t.eventHandleFn.call(this,e)})),e};return s.forEach((t=>{const s=n(t);e.append(s)})),t.append(this.#t.windowTitle,e),t}handleMinClick(){const t=this.#e.querySelector(".min-btn");let e=0;this.#o?(e=1,this.#e.classList.remove("min-window")):(e=0,this.#e.classList.add("min-window")),t.style.transform=`scale(${e})`,t.style.opacity=`${e}`,this.#o=!this.#o}handleScaleClick(){this.#o?this.handleMinClick():(this.#n?(this.#e.style.width=this.#i.width,this.#e.style.height=this.#i.height):(this.#e.style.width=this.#a.width,this.#e.style.height=this.#a.height),this.#n=!this.#n)}handleCloseClick(){this.#s?(this.#e.style.transform="scale(1) translate(-50%, -50%)",this.#e.style.opacity=1,this.#o&&this.handleMinClick()):(this.#e.style.transform="scale(0) translate(-50%, -50%)",this.#e.style.opacity=0),this.#s=!this.#s}#d(){const t=document.createElement("div");t.classList.add("window-content");const e=this.#p(),s=this.#u(),n=this.#h(),o=this.#m();return t.append(e,s,n,o),t}#p(){const t=document.createElement("div");t.classList.add("preference-section");const{preferenceSectionTitle:e}=this.#t,s=`<h3 class="section-title">${e}</h3>`;return t.innerHTML=s+(()=>{let e=this.#t.cardOpacity;const s=`\n        <div class="consumer-beautify">\n          <div class="card-opacity">\n            <div class="title">\n              卡片透明度(0%-100%): <span class="value">${e}%</span>\n            </div>\n            <input type="range" min="0" max="100" value="${e}">\n          </div>\n        </div>\n      `;return this.#g()(["--coderxst-bg-opacity",e/100]),this.#c.push((()=>{const s=t.querySelector("input[type='range']"),n=t.querySelector(".card-opacity .title .value");s.addEventListener("change",(t=>{e=t.target.value,n.innerText=e+"%",this.#g()(["--coderxst-bg-opacity",e/100])}))})),s})()+(()=>{const{bool:e}=CoderxstTools,{backgroundFilterConfig:s}=this.#t,{enable:n,inputConfig:o}=s,i=`\n        <div class="background-filter">\n          <div class="title">\n            背景滤镜:&nbsp;<span class="xst-switch-btn ${n?"active":""}" data-checked="${n}"></span>\n            模糊半径:&nbsp;<span class="value blur-radius">${o.blurRadius}px</span>&nbsp;|\n            饱和度:&nbsp;<span class="value saturation">${o.saturation}%</span>&nbsp;|\n            对比度:&nbsp;<span class="value contrast-ratios">${o.contrastRatios}%</span>\n          </div>\n          <div class="controller">\n            模糊半径:&nbsp;<input type="number" value="0" id="blurRadius">&nbsp;px\n            饱和度:&nbsp;<input type="number" value="100" id="saturation">&nbsp;%\n            对比度:&nbsp;<input type="number" value="100" id="contrastRatios">&nbsp;%\n            <button class="save-btn">保存</button>\n          </div>\n        </div>\n      `,a=()=>{this.#g()(["--coderxst-bg-blur-radius",o.blurRadius+"px"],["--coderxst-bg-saturation",o.saturation+"%"],["--coderxst-bg-contrast-ratios",o.contrastRatios+"%"])};return this.#c.push((()=>{const n=t.querySelector(".background-filter .xst-switch-btn");n.addEventListener("click",(()=>{s.enable=!e(n.dataset.checked),console.log(s)}))}),(()=>{const e=t.querySelectorAll(".background-filter .controller input[type='number']"),s=t.querySelector(".background-filter .title .blur-radius.value"),n=t.querySelector(".background-filter .title .saturation.value"),i=t.querySelector(".background-filter .title .contrast-ratios.value");a(),e.forEach((t=>{t.value=o[t.id],t.addEventListener("change",(e=>{o[t.id]=Number(e.target.value),"blurRadius"===t.id?s.innerText=t.value+"px":"saturation"===t.id?n.innerText=t.value+"%":"contrastRatios"===t.id&&(i.innerText=t.value+"%")}))}))}),(()=>{t.querySelector(".background-filter .controller .save-btn").addEventListener("click",(()=>{n&&(a(),console.log("保存成功"))}))})),i})()+(()=>{const{effectControlList:e,effectControlListColumn:s}=this.#t,n=e.map((t=>`\n        <div class="effect-item">\n          ${t.name}\n          <span \n            class="xst-switch-btn ${t.enable?"active":""}"\n            data-checked="${t.enable}"\n            data-id="${t.id}"\n          ></span>\n        </div>\n      `)),o=CoderxstTools.chunk(n,s).map((t=>`<div class="effect-line">${t.join("")}</div>`)).join("");return this.#c.push((()=>{t.querySelector(".effect-controller").addEventListener("click",(t=>{const s=t.target;if(!s.classList.contains("xst-switch-btn"))return;const n=e.find((t=>t.id===s.dataset.id));n&&(n.enable=!CoderxstTools.bool(s.dataset.checked),n.eventFn(t))}))})),`<div class="effect-controller">${o}</div>`})(),t}#u(){const{themeColor:t,themeColorSectionTitle:e}=this.#t,s=document.createElement("div");s.classList.add("theme-color-section");const n=`<h3 class="section-title">${e}</h3>`,o=t.colorList.map(((e,s)=>`\n        <div\n          class="theme-color-item ${s===t.activeIndex?"active":""}"\n          data-theme-color="${e}"\n          style="--theme-color: ${e}"\n        ></div>\n        `)).join(""),i=t.colorList[t.activeIndex];i&&this.#g()(["--coderxst-theme-color",i],["--anzhiyu-theme",i],["--anzhiyu-main",i]),this.#c.push((()=>{const e=s.querySelectorAll(".theme-color-list .theme-color-item");let n=t.activeIndex;e.forEach(((s,o)=>{s.addEventListener("click",(s=>{const i=s.target,a=e[n];a?.classList.remove("active"),i.classList.add("active"),n=o,t.activeIndex=n,this.#g()(["--coderxst-theme-color",i.dataset.themeColor],["--anzhiyu-theme",i.dataset.themeColor],["--anzhiyu-main",i.dataset.themeColor])}))}))}));const a=`<div class="theme-color-list">${o}</div>`;return s.innerHTML=n+a,s}#h(){const{fontFamily:t,fontFamilySectionTitle:e}=this.#t,{activeIndex:s,fontFamilyList:n}=t,o=document.createElement("div");o.classList.add("font-family-section");const i=`<h3 class="section-title">${e}</h3>`;return o.innerHTML=i+'\n      <div class="statement">\n        <div class="statement-icon">!</div>\n        <div class="statement-content">非商免字体未经授权只能个人使用。本站为完全非商业、非盈利性质的网站，平时用于个人学习交流，如有侵权请联系站长删除，谢谢! ——致版权方</div>\n      </div>\n    '+(()=>{const e=n[s];e&&this.#g(document.body)(["--coderxst-font-family",e]);const i=n.map(((t,e)=>`\n            <div\n              class="font-item ${s===e?"active":""}"\n              data-font-family="${t}"\n              style="--font-family: ${t}"\n            >${t}</div>\n          `)).join("");return this.#c.push((()=>{const e=o.querySelectorAll(".font-list .font-item");let n=s;e.forEach(((s,o)=>{s.addEventListener("click",(s=>{const i=s.target,a=e[n];a?.classList.remove("active"),i.classList.add("active"),n=o,t.activeIndex=n,this.#g(document.body)(["--coderxst-font-family",i.dataset.fontFamily])}))}))})),`<div class="font-list">${i}</div>`})(),o}#m(){const{backgroundSectionTitle:t,backgroundList:e}=this.#t,s=document.createElement("div");s.className="background-section";const n=`<h3 class="section-title">${t}</h3>`;return s.innerHTML=n+(()=>{const t=e.map((t=>{const e=`<div class="title">${t.title}</div>`,s=t.content.map((t=>`\n                <div class="img">\n                  <img\n                    src="${t.url}"\n                    alt="${t.title}"\n                    title="${t.title}"\n                    data-src="${t.url}"\n                    class="bg-img"\n                  >\n                </div>\n              `)).join("");return`\n            <div class="group">\n              ${e}\n              ${`\n            <div class="content" data-title="${t.subtitle}">\n              <div class="background-list">\n                ${s}\n              </div>\n            </div>\n          `}\n            </div>\n          `})).join("");return this.#c.push((()=>{s.querySelectorAll(".background-groups .group .content").forEach((t=>{t.addEventListener("click",(t=>{t.target.classList.toggle("active")}))}))}),(()=>{s.querySelector(".background-groups").addEventListener("click",(t=>{const e=t.target;e.classList.contains("bg-img")&&this.#b(e)}))})),`<div class="background-groups">${t}</div>`})(),s}#b(t){this.#t.backgroundEl.style.backgroundImage=`url(${t.dataset.src})`,this.#t.backgroundEl.style.backgroundSize="cover",this.#t.backgroundEl.style.backgroundPosition="center",this.#t.backgroundEl.style.backgroundRepeat="no-repeat",this.#t.backgroundEl.style.transition="background 0.3s"}#w(){document.addEventListener("DOMContentLoaded",(()=>{this.#c.forEach((t=>t()))}))}#v(){const{bool:t}=CoderxstTools;this.#e.addEventListener("click",(e=>{const s=e.target;s.classList.contains("xst-switch-btn")&&(t(s.dataset.checked)?(s.dataset.checked="false",s.classList.remove("active")):(s.dataset.checked="true",s.classList.add("active")))}))}#g(t=document.documentElement){return(...e)=>{e.forEach((e=>{t.style.setProperty(e[0],e[1])}))}}#l(){const t=this.#r(),e=this.#d();this.#e.append(t,e),document.body.appendChild(this.#e),this.#c.push(this.#v.bind(this)),this.#w()}consumer(t){t(this)}}document.documentElement.classList.contains("windows")&&new BeautifyTheWindow(beautifyTheWindowConfig).consumer((t=>{const e=()=>{const e=document.getElementById("rightside-config-show"),s=e.querySelector("#go-up"),n=document.createElement("button");n.id="switch-bg-btn",n.type="button",n.innerHTML="<i class='fa-solid fa-image'></i>",n.title="美化窗口",n.addEventListener("click",t.handleCloseClick.bind(t)),e.insertBefore(n,s)};document.addEventListener("DOMContentLoaded",e),document.addEventListener("pjax:complete",e)}));
