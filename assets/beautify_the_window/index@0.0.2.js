const backgroundList=[{title:"1. 精选",subtitle:"查看精选背景",content:[{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f978116e011.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f9780e737b6.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f9780701ecb.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f9780193ff7.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f977facaefe.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f977f4dfe95.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f977eb14b6e.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f977e1348cf.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f977bb72033.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f977b5f2cd9.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f977b115dc6.jpg"},{title:"精选照片",url:"https://bu.dusays.com/2023/09/07/64f977ae0dbf9.jpg"}]},{title:"2. 风景",subtitle:"查看风景背景",content:[{title:"风景照片",url:"https://images.pexels.com/photos/255379/pexels-photo-255379.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/2156881/pexels-photo-2156881.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/1382393/pexels-photo-1382393.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/370799/pexels-photo-370799.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/3802075/pexels-photo-3802075.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/1629236/pexels-photo-1629236.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/1287142/pexels-photo-1287142.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/2541310/pexels-photo-2541310.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/1631677/pexels-photo-1631677.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/320617/pexels-photo-320617.jpeg?auto=compress&cs=tinysrgb&w=800"},{title:"风景照片",url:"https://images.pexels.com/photos/1044990/pexels-photo-1044990.jpeg?auto=compress&cs=tinysrgb&w=800"}]}],CoderxstTools={getBase64:t=>new Promise(((e,n)=>{window.URL=window.URL||window.webkitURL;const s=new XMLHttpRequest;s.open("get",t,!0),s.responseType="blob",s.onload=function(){if(200==this.status){const t=this.response,n=new FileReader;n.onloadend=function(t){const n=t.target.result;e(n)},n.readAsDataURL(t)}else n()},s.send()})),throttle(t,e=250){let n=null;return function(...s){null==n&&(t.apply(this,s),n=setTimeout((()=>{clearTimeout(n),n=null}),e))}},bool(t){if("true"===t)return!0;if("false"===t)return!1;throw new Error("参数错误, 只能是字符串类型的'true'或者'false'")},chunk(t,e=1){const n=[];for(let s=0;s<t.length;s+=e)n.push(t.slice(s,s+e));return n}},beautifyTheWindowConfig={windowTitle:"美化窗口",preferenceSectionTitle:"一、显示偏好",themeColorSectionTitle:"二、主题色设置",fontFamilySectionTitle:"三、字体设置",backgroundSectionTitle:"四、背景设置",backgroundEl:document.getElementById("web_bg"),cardOpacity:70,backgroundFilterConfig:{enable:!0,inputConfig:{blurRadius:17,saturation:100,contrastRatios:100}},effectControlList:[{id:"starrySky",name:"星空特效(夜间模式)",enable:!1,eventFn(t){console.log(t.target)}},{id:"neonLamp",name:"霓虹彩灯(夜间模式)",enable:!1,eventFn(t){console.log(t.target)}},{id:"fps",name:"帧率检测(默认开启)",enable:!0,eventFn(t){console.log(t.target)}},{id:"snow",name:"雪花特效(白天模式)",enable:!1,eventFn(t){console.log(t.target)}},{id:"rightWidget",name:"右侧部件(默认开启)",enable:!0,eventFn(t){console.log(t.target)}},{id:"topPermanent",name:"顶栏常驻(默认开启)",enable:!0,eventFn(t){console.log(t.target)}},{id:"asideDisplay",name:"侧栏显隐(默认开启)",enable:!0,eventFn(t){console.log(t.target)}},{id:"asidePosition",name:"侧栏位置(默认右边)",enable:!0,eventFn(t){console.log(t.target)}}],effectControlListColumn:2,themeColor:{activeIndex:-1,colorList:["#f05a5a","#e59642","#c2ce5a","#39ccc1","#5acd82","#66ccff","#425aef","#61649f","#cd5ac3","#935acd","#ee709c","#9d9d9d"]},fontFamily:{activeIndex:-1,fontFamilyList:["宋体","微软雅黑","黑体","仿宋","楷体","隶书","幼圆","华文行楷","华文宋体","华文仿宋","华文楷体"]},backgroundList:backgroundList};class BeautifyTheWindow{#t=null;#e=null;#n=!0;#s=!1;#i=!1;#o={width:"880px",height:"500px"};#a={width:"100vw",height:"100vh"};#c=[];constructor(t){this.#t=t,this.#e=document.createElement("div"),this.#e.id="beautify-the-window",this.#l()}#r(){const t=document.createElement("div");t.classList.add("window-title");const e=document.createElement("div");e.classList.add("btns");const n=[{classList:["btn","close-btn"],innerText:"x",title:"关闭窗口",eventHandleFn:this.handleCloseClick},{classList:["btn","scale-btn"],innerText:"口",title:"最大(恢复)化窗口",eventHandleFn:this.handleScaleClick},{classList:["btn","min-btn"],innerText:"一",title:"最小化窗口",eventHandleFn:this.handleMinClick}],s=t=>{"string"==typeof t.classList&&(t.classList=[t.classList]);const e=document.createElement("span");return e.classList.add(...t.classList),e.innerText=t.innerText,e.title=t.title,e.addEventListener("click",(e=>{t.eventHandleFn.call(this,e)})),e};return n.forEach((t=>{const n=s(t);e.append(n)})),t.append(this.#t.windowTitle,e),t}handleMinClick(){const t=this.#e.querySelector(".min-btn");let e=0;this.#i?(e=1,this.#e.classList.remove("min-window")):(e=0,this.#e.classList.add("min-window")),t.style.transform=`scale(${e})`,t.style.opacity=`${e}`,this.#i=!this.#i}handleScaleClick(){this.#i?this.handleMinClick():(this.#s?(this.#e.style.width=this.#o.width,this.#e.style.height=this.#o.height):(this.#e.style.width=this.#a.width,this.#e.style.height=this.#a.height),this.#s=!this.#s)}handleCloseClick(){this.#n?(this.#e.style.transform="scale(1) translate(-50%, -50%)",this.#e.style.opacity=1,this.#i&&this.handleMinClick()):(this.#e.style.transform="scale(0) translate(-50%, -50%)",this.#e.style.opacity=0),this.#n=!this.#n}#d(){const t=document.createElement("div");t.classList.add("window-content");const e=this.#u(),n=this.#h(),s=this.#p(),i=this.#m();return t.append(e,n,s,i),t}#u(){const t=document.createElement("div");t.classList.add("preference-section");const{preferenceSectionTitle:e}=this.#t,n=`<h3 class="section-title">${e}</h3>`;return t.innerHTML=n+(()=>{let e=this.#t.cardOpacity;const n=`\n        <div class="consumer-beautify">\n          <div class="card-opacity">\n            <div class="title">\n              卡片透明度(0%-100%): <span class="value">${e}%</span>\n            </div>\n            <input type="range" min="0" max="100" value="${e}">\n          </div>\n        </div>\n      `;return this.#g()(["--coderxst-bg-opacity",e/100]),this.#c.push((()=>{const n=t.querySelector("input[type='range']"),s=t.querySelector(".card-opacity .title .value");n.addEventListener("change",(t=>{e=t.target.value,s.innerText=e+"%",this.#g()(["--coderxst-bg-opacity",e/100])}))})),n})()+(()=>{const{bool:e}=CoderxstTools,{backgroundFilterConfig:n}=this.#t,{enable:s,inputConfig:i}=n,o=`\n        <div class="background-filter">\n          <div class="title">\n            背景滤镜:&nbsp;<span class="xst-switch-btn ${s?"active":""}" data-checked="${s}"></span>\n            模糊半径:&nbsp;<span class="value blur-radius">${i.blurRadius}px</span>&nbsp;|\n            饱和度:&nbsp;<span class="value saturation">${i.saturation}%</span>&nbsp;|\n            对比度:&nbsp;<span class="value contrast-ratios">${i.contrastRatios}%</span>\n          </div>\n          <div class="controller">\n            模糊半径:&nbsp;<input type="number" value="0" id="blurRadius">&nbsp;px\n            饱和度:&nbsp;<input type="number" value="100" id="saturation">&nbsp;%\n            对比度:&nbsp;<input type="number" value="100" id="contrastRatios">&nbsp;%\n            <button class="save-btn">保存</button>\n          </div>\n        </div>\n      `,a=()=>{this.#g()(["--coderxst-bg-blur-radius",i.blurRadius+"px"],["--coderxst-bg-saturation",i.saturation+"%"],["--coderxst-bg-contrast-ratios",i.contrastRatios+"%"])};return this.#c.push((()=>{const s=t.querySelector(".background-filter .xst-switch-btn");s.addEventListener("click",(()=>{n.enable=!e(s.dataset.checked),console.log(n)}))}),(()=>{const e=t.querySelectorAll(".background-filter .controller input[type='number']"),n=t.querySelector(".background-filter .title .blur-radius.value"),s=t.querySelector(".background-filter .title .saturation.value"),o=t.querySelector(".background-filter .title .contrast-ratios.value");a(),e.forEach((t=>{t.value=i[t.id],t.addEventListener("change",(e=>{i[t.id]=Number(e.target.value),"blurRadius"===t.id?n.innerText=t.value+"px":"saturation"===t.id?s.innerText=t.value+"%":"contrastRatios"===t.id&&(o.innerText=t.value+"%")}))}))}),(()=>{t.querySelector(".background-filter .controller .save-btn").addEventListener("click",(()=>{s&&(a(),console.log("保存成功"))}))})),o})()+(()=>{const{effectControlList:e,effectControlListColumn:n}=this.#t,s=e.map((t=>`\n        <div class="effect-item">\n          ${t.name}\n          <span \n            class="xst-switch-btn ${t.enable?"active":""}"\n            data-checked="${t.enable}"\n            data-id="${t.id}"\n          ></span>\n        </div>\n      `)),i=CoderxstTools.chunk(s,n).map((t=>`<div class="effect-line">${t.join("")}</div>`)).join("");return this.#c.push((()=>{t.querySelector(".effect-controller").addEventListener("click",(t=>{const n=t.target;if(!n.classList.contains("xst-switch-btn"))return;const s=e.find((t=>t.id===n.dataset.id));s&&(s.enable=!CoderxstTools.bool(n.dataset.checked),s.eventFn(t))}))})),`<div class="effect-controller">${i}</div>`})(),t}#h(){const{themeColor:t,themeColorSectionTitle:e}=this.#t,n=document.createElement("div");n.classList.add("theme-color-section");const s=`<h3 class="section-title">${e}</h3>`,i=t.colorList.map(((e,n)=>`\n        <div\n          class="theme-color-item ${n===t.activeIndex?"active":""}"\n          data-theme-color="${e}"\n          style="--theme-color: ${e}"\n        ></div>\n        `)).join(""),o=t.colorList[t.activeIndex];o&&this.#g()(["--coderxst-theme-color",o],["--anzhiyu-theme",o],["--anzhiyu-main",o]),this.#c.push((()=>{const e=n.querySelectorAll(".theme-color-list .theme-color-item");let s=t.activeIndex;e.forEach(((n,i)=>{n.addEventListener("click",(n=>{const o=n.target,a=e[s];a?.classList.remove("active"),o.classList.add("active"),s=i,t.activeIndex=s,this.#g()(["--coderxst-theme-color",o.dataset.themeColor],["--anzhiyu-theme",o.dataset.themeColor],["--anzhiyu-main",o.dataset.themeColor])}))}))}));const a=`<div class="theme-color-list">${i}</div>`;return n.innerHTML=s+a,n}#p(){const{fontFamily:t,fontFamilySectionTitle:e}=this.#t,{activeIndex:n,fontFamilyList:s}=t,i=document.createElement("div");i.classList.add("font-family-section");const o=`<h3 class="section-title">${e}</h3>`;return i.innerHTML=o+'\n      <div class="statement">\n        <div class="statement-icon">!</div>\n        <div class="statement-content">非商免字体未经授权只能个人使用。本站为完全非商业、非盈利性质的网站，平时用于个人学习交流，如有侵权请联系站长删除，谢谢! ——致版权方</div>\n      </div>\n    '+(()=>{const e=s[n];e&&this.#g(document.body)(["--coderxst-font-family",e]);const o=s.map(((t,e)=>`\n            <div\n              class="font-item ${n===e?"active":""}"\n              data-font-family="${t}"\n              style="--font-family: ${t}"\n            >${t}</div>\n          `)).join("");return this.#c.push((()=>{const e=i.querySelectorAll(".font-list .font-item");let s=n;e.forEach(((n,i)=>{n.addEventListener("click",(n=>{const o=n.target,a=e[s];a?.classList.remove("active"),o.classList.add("active"),s=i,t.activeIndex=s,this.#g(document.body)(["--coderxst-font-family",o.dataset.fontFamily])}))}))})),`<div class="font-list">${o}</div>`})(),i}#m(){const{backgroundSectionTitle:t,backgroundList:e}=this.#t,n=document.createElement("div");n.className="background-section";const s=`<h3 class="section-title">${t}</h3>`;return n.innerHTML=s+(()=>{const t=e.map((t=>{const e=`<div class="title">${t.title}</div>`,n=t.content.map((t=>`\n                <div class="img">\n                  <img\n                    src="${t.url}"\n                    alt="${t.title}"\n                    title="${t.title}"\n                    data-src="${t.url}"\n                    class="bg-img"\n                  >\n                </div>\n              `)).join("");return`\n            <div class="group">\n              ${e}\n              ${`\n            <div class="content" data-title="${t.subtitle}">\n              <div class="background-list">\n                ${n}\n              </div>\n            </div>\n          `}\n            </div>\n          `})).join("");return this.#c.push((()=>{n.querySelectorAll(".background-groups .group .content").forEach((t=>{t.addEventListener("click",(t=>{t.target.classList.toggle("active")}))}))}),(()=>{n.querySelector(".background-groups").addEventListener("click",(t=>{const e=t.target;e.classList.contains("bg-img")&&this.#b(e)}))})),`<div class="background-groups">${t}</div>`})(),n}#b(t){this.#t.backgroundEl.style.background=`url(${t.dataset.src}) left top/100% auto no-repeat`,this.#t.backgroundEl.style.transition="background 0.3s"}#f(){document.addEventListener("DOMContentLoaded",(()=>{this.#c.forEach((t=>t()))}))}#v(){const{bool:t}=CoderxstTools;this.#e.addEventListener("click",(e=>{const n=e.target;n.classList.contains("xst-switch-btn")&&(t(n.dataset.checked)?(n.dataset.checked="false",n.classList.remove("active")):(n.dataset.checked="true",n.classList.add("active")))}))}#g(t=document.documentElement){return(...e)=>{e.forEach((e=>{t.style.setProperty(e[0],e[1])}))}}#l(){const t=this.#r(),e=this.#d();this.#e.append(t,e),document.body.appendChild(this.#e),this.#c.push(this.#v.bind(this)),this.#f()}consumer(t){t(this)}}document.documentElement.classList.contains("windows")&&new BeautifyTheWindow(beautifyTheWindowConfig).consumer((t=>{const e=()=>{const e=document.getElementById("rightside-config-show"),n=e.querySelector("#go-up"),s=document.createElement("button");s.id="switch-bg-btn",s.type="button",s.innerHTML="<i class='fa-solid fa-image'></i>",s.title="美化窗口",s.addEventListener("click",t.handleCloseClick.bind(t)),e.insertBefore(s,n)};document.addEventListener("DOMContentLoaded",e),document.addEventListener("pjax:complete",e)}));